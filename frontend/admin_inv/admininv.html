<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel de Administración de Inventario</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link rel="stylesheet" href="../admin_unificado.css">
</head>

<body>
  <nav class="sidebar">
    <div class="sidebar-header">
      <h2><i class="fas fa-boxes"></i> <span class="menu-text">Inventario</span></h2>
      </div>
    <ul class="sidebar-menu">
      <li><a href="#" class="active" data-tab="inventario"><i class="fas fa-boxes"></i> <span
            class="menu-text">Inventario</span></a></li>
      <li><a href="#" id="btnLogout"><i class="fas fa-sign-out-alt"></i> <span class="menu-text">Cerrar
            Sesión</span></a></li>
      </ul>
    </nav>

  <main class="main-content">
    <div class="header">
      <h1>Panel de Administración de Inventario</h1>
      <div class="user-info">
        <div class="user-avatar" id="userAvatar">A</div>
        <span id="userName">Bienvenido, Admin</span>
      </div>
      </div>

    <div id="lowStockAlert" class="alert alert-danger hidden">
      </div>

    <div id="inventario" class="tab-content active">
      <div class="section">
        <div class="section-header">
          <h2 class="section-title">Inventario Actual</h2>
          <span id="lastUpdated" class="badge badge-cliente" style="font-size: 12px;">Cargando...</span>
          <div class="inv-actions" style="display: flex; gap: 10px; align-items: center; margin-left: auto;">
            <button id="btnNew" class="btn btn-success"><i class="fas fa-plus"></i> Agregar nuevo</button>
            <div class="inv-search" style="display: flex; gap: 5px;">
              <input id="search" class="form-control" placeholder="Buscar por nombre o SKU…">
              <button id="btnSearch" class="btn btn-primary"><i
                  class="fas fa-magnifying-glass"></i></button>
              </div>
            </div>
          </div>

        <div class="table-container">
          <table id="table">
           <thead>
              <tr>
                 <th style="width:84px">SKU</th>
                <th>Nombre</th>
                <th style="width:180px">Marca / Categoría</th>
                <th style="width:120px">Precio</th>
                <th style="width:100px">Stock</th>
                <th style="width:120px">Estado</th>
                <th style="width:160px; text-align:right;">Acciones</th>
                </tr>
              </thead>
            <tbody id="tbody"></tbody>
            </table>
          </div>

        <div class="table-footer">
          <div id="meta" class="muted">0 productos</div>
          <div class="pager">
            <button id="prev" class="btn btn-sm" title="Anterior"><i
                class="fa-solid fa-chevron-left"></i></button>
            <span id="page" class="muted" style="padding: 0 5px;">1 / 1</span>
            <button id="next" class="btn btn-sm" title="Siguiente"><i
                class="fa-solid fa-chevron-right"></i></button>
            </div>
          </div>
        </div>
      </div>
    </main>

  <div id="modalForm" class="modal">
    <div class="modal-content modal-lg">
      <div class="modal-header">
        <h3 id="formTitle" class="modal-title">Nuevo producto</h3>
        <button class="close" data-close>&times;</button>
        </div>
      <form id="form">
        <input type="hidden" id="id">
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label" for="sku">SKU</label>
            <input id="sku" class="form-control" required>
            </div>
          <div class="form-group">
            <label class="form-label" for="name">Nombre</label>
            <input id="name" class="form-control" required>
            </div>
          <div class="form-group">
            <label class="form-label" for="brand">Marca/Categoría</label>
            <input id="brand" class="form-control" placeholder="Sony, Electrónica…">
            </div>
          <div class="form-group">
            <label class="form-label" for="price">Precio</label>
            <input id="price" type="number" min="0" step="0.01" class="form-control" required>
            </div>
          <div class="form-group">
            <label class="form-label" for="stock">Stock</label>
            <input id="stock" type="number" min="0" step="1" class="form-control" required>
            </div>
          <div class="form-group">
            <label class="form-label" for="minStock">Mín. Stock</label>
            <input id="minStock" type="number" min="0" step="1" class="form-control" value="0">
            </div>
          <div class="form-group grid-span-2">
            <label class="form-label" for="desc">Descripción</label>
            <textarea id="desc" rows="3" class="form-control"></textarea>
            </div>
          <div class="form-group grid-span-2">
            <label class="form-label" for="imageUpload">Subir imagen (opcional)</label>
            <input id="imageUpload" type="file" class="form-control"
              accept="image/png, image/jpeg, image/webp">
            </div>
          <div class="form-group grid-span-2">
            <input id="active" type="checkbox" checked style="margin-right: 10px; width: auto;">
            <label class="form-label" for="active" style="display: inline-block; vertical-align: middle;">
              Activo
              </label>
            </div>
          </div>
        <div class="form-group"
          style="text-align: right; margin-top: 20px; border-top: 1px solid #eee; padding-top: 20px; margin-bottom: 0;">
          <button type="button" class="btn" data-close>Cancelar</button>
          <button id="save" type="submit" class="btn btn-primary">Guardar</button>
          /div>
        </form>
      </div>
    </div>

  <div id="modalStock" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Ajustar stock</h3>
        <button class="close" data-close>&times;</button>
        </div>
      <form id="formAdjust">
        <input type="hidden" id="adjId">
        <div class="form-grid-3">
          <div class="form-group">
            <label class="form-label" for="adjType">Tipo</label>
            <select id="adjType" class="form-control">
              <option value="IN">Entrada (+)</option>
              <option value="OUT">Salida (-)</option>
              <option value="ADJUST">Ajuste</option>
              </select>
            </div>
          <div class="form-group">
            <label class="form-label" for="adjQty">Cantidad</label>
            <input id="adjQty" type="number" min="1" step="1" class="form-control" value="1">
            </div>
          <div class="form-group">
            <label class="form-label" for="adjReason">Motivo</label>
            <input id="adjReason" class="form-control" placeholder="Compra, merma…">
            </div>
          </div>
        <div class="form-group"
          style="text-align: right; margin-top: 20px; border-top: 1px solid #eee; padding-top: 20px; margin-bottom: 0;">
          <button type="button" class="btn" data-close>Cancelar</button>
          <button id="applyAdjust" type="submit" class="btn btn-primary">Aplicar</button>
          </div>
        </form>
      </div>
    </div>

  <div id="toasts" class="toasts"></div>

  <script type="module" src="admininv.js"></script>
</body>

</html>