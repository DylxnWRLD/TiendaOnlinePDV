<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punto de Venta (PDV) - Level One</title>
    <!-- Incluir los estilos CSS que generamos -->
    <link rel="stylesheet" href="cajero.css"> 
</head>
<body>
    <div class="pdv-layout">
        
        <!-- Columna Izquierda: Acciones de Caja -->
        <aside class="col-acciones-caja">
            <h3 class="cyber-glow">Cajero Activo</h3>
            <div class="info-caja-sesion">
                <p>Cajero: <span id="cajero-nombre">Nombre de Cajero</span></p>
                <p>Corte Activo: <span id="corte-id">ID Corte</span></p>
            </div>
            
            <hr>
            
            <h4 class="section-title">Operaciones de Venta</h4>
            
            <button id="btn-cancelar-venta" class="btn-accion btn-cancelar"> Cancelar Venta Actual</button>
            <button id="btn-aplicar-promo" class="btn-accion" > Aplicar PromociÃ³n</button>
            <button id="btn-devolucion" class="btn-accion"> Cambios y Devoluciones</button>
            
            <hr>
            
            <h4 class="section-title">GestiÃ³n de Turno</h4>
            
            <button id="btn-corte-caja" class="btn-accion btn-danger"> Corte de Caja</button>
            <button id="btn-buscar-ventas" class="btn-accion"> Buscar Ventas Anteriores</button>

            <hr>
            
            <button id="btn-logout" class="btn-accion btn-logout"> Cerrar SesiÃ³n</button>
        </aside>

        <!-- Columna Central: Venta Principal y Carrito -->
        <main class="col-venta-principal">
            <h3 class="cyber-glow title-venta-actual">Iniciar Venta / Agregar Productos ðŸ›’</h3>

            <section class="seccion-busqueda">
                <input type="text" id="input-sku" placeholder="Escanear o buscar SKU / Nombre" autofocus>
                <div id="resultados-busqueda" class="resultados-area">
                    <p class="instruccion">Escribe o escanea para buscar...</p>
                </div>
            </section>
            
            <section class="seccion-carrito">
                <h4 class="subtitle-venta">Detalle de la TransacciÃ³n</h4>
                <div class="carrito-area">
                    <table id="detalle-venta-tabla">
                        <thead>
                            <tr>
                                <th style="width: 45%;">Producto</th>
                                <th style="width: 15%;">Cant.</th>
                                <th style="width: 25%;">Precio</th>
                                <th style="width: 15%;">AcciÃ³n</th>
                            </tr>
                        </thead>
                        <tbody id="carrito-body">
                            <!-- Filas de productos se renderizan aquÃ­ -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>

        <!-- Columna Derecha: Resumen de Pago -->
        <section class="col-pago-final">
            <h3 class="cyber-glow">Cobro </h3>
            <div class="totales-resumen">
                <h3>Resumen de Cobro</h3>
                <p>Subtotal: $<span id="subtotal" class="monto">0.00</span></p>
                <p>Descuento: $<span id="descuento" class="monto">0.00</span></p>
                <div class="total-final-line">
                    <h4>TOTAL:</h4> 
                    <h4 id="total-final" class="monto monto-total">0.00</h4>
                </div>
            </div>

            <hr>
            
            <h4 class="section-title">Opciones de Pago</h4>
            
            <button id="btn-pago-efectivo" class="btn-pago btn-success">ðŸ’µ Pagar en Efectivo</button>
            <button id="btn-pago-tarjeta" class="btn-pago btn-primary">ðŸ’³ Pagar con Tarjeta</button>
        </section>
    </div>

    <!-- ========================================================================= -->
    <!-- MODALES -->
    <!-- ========================================================================= -->

    <!-- 1. MODAL DE PAGO EN EFECTIVO-->
    <div id="modal-efectivo" class="modal" style="display: none;">
        <div class="modal-content">
            <!-- ASIGNAR ID: Manejado en JS para evitar lÃ³gica de negocio -->
            <span class="close" id="close-modal-efectivo">&times;</span>
            <h2>Cobro en Efectivo</h2>
            
            <div class="modal-linea">
                <label>Total a Cobrar:</label>
                <span id="modal-total" class="monto monto-total">0.00</span> 
            </div>
            
            <div class="modal-linea">
                <label for="monto-recibido">Monto Recibido:</label>
                <input type="number" id="monto-recibido" min="0" value="0.00" step="0.01" autofocus>
            </div>
            
            <div class="modal-linea cambio-linea">
                <label>Cambio / Faltante:</label>
                <span id="cambio-calculado" class="monto monto-cambio">0.00</span>
            </div>
            
            <button id="btn-finalizar-efectivo" class="btn-pago btn-success btn-full">
                Finalizar Venta en Efectivo
            </button>
        </div>
    </div>
    
    <!-- 2. NUEVO MODAL: Corte de Caja (Solicitud de Monto Contado) -->
    <div id="modal-corte-caja" class="modal" style="display: none;">
        <div class="modal-content">
            <!-- ASIGNAR ID: Manejado en JS para evitar lÃ³gica de negocio -->
            <span class="close" id="close-modal-corte">&times;</span>
            <h2>Realizar Corte de Caja</h2>
            <p class="instruccion">Por favor, ingrese el monto total en efectivo contado en la caja.</p>
            
            <div class="modal-linea">
                <label for="monto-contado">Monto Contado ($):</label>
                <input type="number" id="monto-contado" min="0" value="0.00" step="0.01" autofocus>
            </div>

            <button id="btn-confirmar-corte" class="btn-pago btn-danger btn-full">
                Confirmar y Cerrar Caja
            </button>
        </div>
    </div>

    <!-- 3. NUEVO MODAL: Reporte Final del Corte -->
    <div id="modal-reporte-corte" class="modal" style="display: none;">
        <div class="modal-content">
            <!-- ASIGNAR ID: Manejado en JS para evitar lÃ³gica de negocio -->
            <span class="close" id="close-modal-reporte">&times;</span>
            <h2>âœ… Corte de Caja Exitoso</h2>
            <p class="instruccion">Â¡Cuidado! Si acepta, la sesiÃ³n se cerrarÃ¡ y deberÃ¡ volver a iniciar.</p>

            <table class="reporte-tabla">
                <tr><th>Fondo Inicial:</th><td>$<span id="reporte-inicial">0.00</span></td></tr>
                <tr><th>Ventas en Efectivo:</th><td>$<span id="reporte-ventas">0.00</span></td></tr>
                <tr class="linea-separadora"><th>Monto TeÃ³rico (Calculado):</th><td>$<span id="reporte-teorico">0.00</span></td></tr>
                <tr><th>Monto Contado (Declarado):</th><td>$<span id="reporte-contado">0.00</span></td></tr>
                <tr class="linea-final"><th>DIFERENCIA:</th><td class="monto-diferencia">$<span id="reporte-diferencia">0.00</span></td></tr>
            </table>

            <!-- Contenedor Flex para los botones de Modificar y Aceptar -->
            <div class="flex-buttons-reporte">
                <!-- â­ï¸ NUEVO BOTÃ“N PARA MODIFICAR â­ï¸ -->
                <button id="btn-modificar-corte" class="btn-pago btn-warning">
                    Modificar Monto Contado
                </button>
                <button id="btn-aceptar-reporte" class="btn-pago btn-success">
                    Aceptar y Finalizar SesiÃ³n
                </button>
            </div>
        </div>
    </div>
    
    <script src="cajero.js"></script>
</body>
</html>
